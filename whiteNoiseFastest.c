const uint8_t lookup[] = {0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0};
const uint8_t update[] = {4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,2,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,16,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,2,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,1,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,2,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,16,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,2,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,32,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,2,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,16,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,2,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,1,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,2,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,16,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,2,4,128,4,8,4,128,4,64,4,128,4,8,4,128,4,32};
uint16_t lfsr;
uint8_t upper;


void setup(){
    lfsr = random(1,255);
    DDRD = 0xFF;
    pinMode(8, OUTPUT);
}


void loop(){
    //72 cycles
    memcpy((void*)&upper, (void*)&lfsr+1, 1);
    lfsr <<= 1;
    lfsr += lookup[upper];
    PORTD ^= (lfsr & update[PORTB++]);

    // Replace PORTB with a uint8_t var; just for testing

}